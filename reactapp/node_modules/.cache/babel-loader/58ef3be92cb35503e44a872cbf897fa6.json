{"ast":null,"code":"var _jsxFileName = \"/home/suomi/JS_training/batch19/projets/MorningNews/part3/Backend/reactapp/src/ScreenArticlesBySource.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Card, Icon, Modal, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport './App.css';\nimport Nav from './Nav';\nconst {\n  Meta\n} = Card;\n/* Initialize News API */\n//const NewsAPI = require('newsapi');\n\nconst APIkey = '920fe1871ec5410289dba3174398da12';\n\nfunction ScreenArticlesBySource(props) {\n  const [articles, setArticles] = useState([]);\n  const [visible, setVisible] = useState(false);\n  useEffect(() => {\n    async function fetchNews() {\n      let today = new Date();\n      let yesterday = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`;\n      let urlRequestNews = `https://newsapi.org/v2/everything?sources=${props.match.params.id}&from=${yesterday}&apiKey=${APIkey}`;\n      let articles = await fetch(urlRequestNews);\n      let response = await articles.json();\n\n      if (response.status === 'ok') {\n        articles = response.articles.map(element => {\n          return {\n            id: Math.round(Math.random() * 10000),\n            ...element\n          };\n        });\n        setArticles(articles);\n      }\n    }\n\n    fetchNews();\n  }, [props]);\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = e => {\n    //console.log(e);\n    setVisible(false);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, articles.map((article, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        align: 'middle'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        width: 300,\n        margin: '15px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between'\n      },\n      cover: React.createElement(\"img\", {\n        alt: \"example\",\n        src: article.urlToImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }),\n      actions: [React.createElement(Icon, {\n        type: \"read\",\n        key: \"ellipsis2\",\n        onClick: showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        type: \"like\",\n        key: \"ellipsis\",\n        onClick: () => props.addToWishList(article),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: article.title,\n      description: article.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      title: article.source.name,\n      visible: visible,\n      footer: [React.createElement(Button, {\n        key: \"okButton\",\n        type: \"primary\",\n        onClick: handleOk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Ok\")],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: article.title,\n      description: article.content,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })));\n  })));\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addToWishList: function (articleObj) {\n      dispatch({\n        type: 'addArticle',\n        article: articleObj\n      });\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(ScreenArticlesBySource);","map":{"version":3,"sources":["/home/suomi/JS_training/batch19/projets/MorningNews/part3/Backend/reactapp/src/ScreenArticlesBySource.js"],"names":["React","useState","useEffect","Card","Icon","Modal","Button","connect","Nav","Meta","APIkey","ScreenArticlesBySource","props","articles","setArticles","visible","setVisible","fetchNews","today","Date","yesterday","getFullYear","getMonth","getDate","urlRequestNews","match","params","id","fetch","response","json","status","map","element","Math","round","random","showModal","handleOk","e","article","i","display","justifyContent","align","width","margin","flexDirection","urlToImage","addToWishList","title","description","source","name","content","mapDispatchToProps","dispatch","articleObj","type"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Card, Icon, Modal, Button } from 'antd';\nimport { connect } from 'react-redux';\n\nimport './App.css';\nimport Nav from './Nav';\n\nconst { Meta } = Card;\n\n\n\n/* Initialize News API */\n//const NewsAPI = require('newsapi');\nconst APIkey = '920fe1871ec5410289dba3174398da12';\n\n\nfunction ScreenArticlesBySource( props ) {\n\n  const [ articles, setArticles ] = useState([]);\n  const [ visible, setVisible ] = useState(false);\n\n  useEffect( () => {\n\t\tasync function fetchNews () {\n\t\t\tlet today = new Date();\n\t\t\tlet yesterday = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;\n\t\t\tlet urlRequestNews = `https://newsapi.org/v2/everything?sources=${props.match.params.id}&from=${yesterday}&apiKey=${APIkey}`;\n\t\t\tlet articles = await fetch( urlRequestNews );\n\t\t\tlet response = await articles.json();\n\t\t\t\n\t\t\tif(response.status === 'ok'){\t\t\t\n\t\t\t\tarticles = response.articles.map( element => {\n\t\t\t\t\treturn {id: Math.round( Math.random()*10000 ) , ...element};\n\t\t\t\t})\n\t\t\t\tsetArticles( articles )\n\t\t\t}\n\t\t}\n\t\tfetchNews();\t\n\t}, [props] );\n\t\n\tconst showModal = () => {\n\t\tsetVisible(true);\t\n\t}\n\n\tconst handleOk = e => {\n\t\t//console.log(e);\n\t\tsetVisible( false );\n  };\n\n\n  return (\n    <div>\n   \t<Nav />\n      <div className=\"Banner\"/>\n      <div className=\"Card\" >\n\t\t\t\n\t\t\t{articles.map( (article, i ) => {\t\n\t\t\t\treturn(\n\t\t\t\t\n\t\t\t\t <div key={i} style={{display:'flex', justifyContent:'space-around', align:'middle'}}>\n\t\t\t\t\t<Card\n\t\t\t\t      style={{ \n\t\t\t\t\t\t   width: 300, \n\t\t\t\t\t\t   margin:'15px', \n\t\t\t\t\t\t   display:'flex',\n\t\t\t\t\t\t   flexDirection: 'column',\n\t\t\t\t\t\t   justifyContent:'space-between' }}\n\t\t\t\t      cover={\n\t\t\t\t\t\t   <img\n\t\t\t\t\t\t       alt=\"example\"\n\t\t\t\t\t\t       src={article.urlToImage}\n\t\t\t\t\t\t   />\n\t\t\t\t      }\n\t\t\t\t      actions={[\n\t\t\t\t          <Icon type=\"read\" key=\"ellipsis2\" onClick={showModal} />,\n\t\t\t\t          <Icon type=\"like\" key=\"ellipsis\" onClick={ () => props.addToWishList( article ) }/>\n\t\t\t\t      ]}\n\t\t\t\t  \t>\n\t\t\t\t\t\t<Meta\n\t\t\t\t\t\t  title={article.title}\n\t\t\t\t\t\t  description={article.description}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</Card>\n\t\t\t\t \n\t\t\t\t\t<Modal\n\t\t\t\t\t\ttitle={article.source.name}\n\t\t\t\t\t\tvisible={visible}\n\t\t\t\t\t\tfooter={[\n\t\t\t\t\t\t\t<Button key=\"okButton\" type=\"primary\" onClick={handleOk}>\n\t\t\t\t\t\t\t\tOk\n\t\t\t\t\t\t\t</Button>,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\t\n\t\t\t\t\t >\n\t\t\t\t\t\t<Meta \n\t\t\t\t\t\t  title={article.title}\n\t\t\t\t\t\t  description={article.content}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</Modal>\n\t\t\t\t\n \t\t\t\t </div>\n\t\t\t\t);\t\t\t\t\n\t\t\t} ) }\n\t\t\t\n\t\t</div>\n    </div> \n\n  );\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addToWishList: function(articleObj) { \n       dispatch( { type: 'addArticle', article: articleObj } ) \n    }\n  }\n}\n\nexport default connect(\n    null, \n    mapDispatchToProps\n)( ScreenArticlesBySource );\n\n\n\n"]},"metadata":{},"sourceType":"module"}