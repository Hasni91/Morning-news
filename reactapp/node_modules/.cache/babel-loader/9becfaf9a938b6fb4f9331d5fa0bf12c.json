{"ast":null,"code":"var _jsxFileName = \"/home/suomi/JS_training/batch19/projets/MorningNews/part3/Backend/reactapp/src/ScreenHome.js\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Input, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport './App.css';\n\nfunction ScreenHome(props) {\n  const [isLogin, setIsLogin] = useState(false);\n  const [error, setError] = useState('');\n  const [signinEmail, setsigninEmail] = useState('');\n  const [signinPassword, setsigninPassword] = useState('');\n  const [signupName, setsignupName] = useState('');\n  const [signupEmail, setsignupEmail] = useState('');\n  const [signupPassword, setsignupPassword] = useState('');\n\n  const handleSignIn = async () => {\n    let url = '/sign-in';\n    let options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `email=${signinEmail}&password=${signinPassword}`\n    };\n    let sources = await fetch(url, options);\n    let response = await sources.json();\n\n    if (response.success) {\n      props.login(response.userToken);\n      setIsLogin(true);\n    } else {\n      setIsLogin(false);\n      setError(response.error);\n    }\n  };\n\n  const handleSignUp = async () => {\n    let url = '/sign-up';\n    let options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `name=${signupName}&email=${signupEmail}&password=${signupPassword}`\n    };\n    let sources = await fetch(url, options);\n    let response = await sources.json();\n    console.log('signup response ', response);\n\n    if (response.success) {\n      props.login(response.userToken);\n      setIsLogin(true);\n    } else {\n      setIsLogin(false);\n      setError(response.error);\n    }\n  };\n\n  if (isLogin) {\n    return React.createElement(Redirect, {\n      to: \"/sources\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    });\n  }\n\n  const ShowError = () => {\n    if (error) {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, error, \" \");\n    } else {\n      return null;\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"back-image-loginpage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(ShowError, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Login-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Sign\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Input, {\n    id: \"signinEmail\",\n    className: \"Login-input\",\n    placeholder: \"arthur@lacapsule.com\",\n    onChange: e => setsigninEmail(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(Input.Password, {\n    id: \"signinPassword\",\n    className: \"Login-input\",\n    placeholder: \"password\",\n    onChange: e => setsigninPassword(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: () => handleSignIn(),\n    style: {\n      width: '80px'\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Sign-in\")), React.createElement(\"div\", {\n    className: \"Sign\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Input, {\n    id: \"signupName\",\n    className: \"Login-input\",\n    placeholder: \"Arthur G\",\n    onChange: e => setsignupName(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Input, {\n    id: \"signupEmail\",\n    className: \"Login-input\",\n    placeholder: \"arthur@lacapsule.com\",\n    onChange: e => setsignupEmail(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(Input.Password, {\n    id: \"signupPassword\",\n    className: \"Login-input\",\n    placeholder: \"password\",\n    onChange: e => setsignupPassword(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: () => handleSignUp(),\n    style: {\n      width: '80px'\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Sign-up\"))));\n} //function mapStateToProps(state) {\n//  return {\n//    userToken: state.loginToken\n//  }\n//}\n\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    login: function (str) {\n      dispatch({\n        type: 'addLogin',\n        token: str\n      });\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(ScreenHome);","map":{"version":3,"sources":["/home/suomi/JS_training/batch19/projets/MorningNews/part3/Backend/reactapp/src/ScreenHome.js"],"names":["React","useState","Redirect","Input","Button","connect","ScreenHome","props","isLogin","setIsLogin","error","setError","signinEmail","setsigninEmail","signinPassword","setsigninPassword","signupName","setsignupName","signupEmail","setsignupEmail","signupPassword","setsignupPassword","handleSignIn","url","options","method","headers","body","sources","fetch","response","json","success","login","userToken","handleSignUp","console","log","ShowError","e","target","value","width","mapDispatchToProps","dispatch","str","type","token"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {  Redirect } from 'react-router-dom';\nimport { Input, Button } from 'antd';\nimport {connect} from 'react-redux';\n\nimport './App.css';\n\n\nfunction ScreenHome(props) {\n\n  const [isLogin, setIsLogin] = useState(false);\n  const [error, setError] = useState('');\n  \n  const [signinEmail, setsigninEmail] = useState('');\n  const [signinPassword, setsigninPassword] = useState('');\n  \n  \n  const [signupName, setsignupName] = useState('');\n  const [signupEmail, setsignupEmail] = useState('');\n  const [signupPassword, setsignupPassword] = useState('');\n  \n  \n  \n  \n  \tconst handleSignIn = async () => {\n\t\tlet url = '/sign-in';\n\t\tlet options = {  \n\t\t\tmethod: 'POST',\n\t\t\theaders: {'Content-Type':'application/x-www-form-urlencoded'},\n\t\t\tbody: `email=${signinEmail}&password=${signinPassword}` };\n\n\t\tlet sources = await fetch( url, options );\n\t\tlet response = await sources.json();\n\t\t\n\t\tif ( response.success ) {\n\t\t\tprops.login( response.userToken );\n\t\t\tsetIsLogin(true);\n\t\t} else {\n\t\t\tsetIsLogin(false);\n\t\t\tsetError( response.error )\n\t\t}\n  \t}\n  \n  \n  \n  \tconst handleSignUp = async () => {\n\t\tlet url = '/sign-up';\n\t\tlet options = {  \n\t\t\tmethod: 'POST',\n\t\t\theaders: {'Content-Type':'application/x-www-form-urlencoded'},\n\t\t\tbody: `name=${signupName}&email=${signupEmail}&password=${signupPassword}` };\n\n\t\tlet sources = await fetch( url, options );\n\t\tlet response = await sources.json();\n\t\tconsole.log('signup response ',response)\n\t\t\n\t\tif ( response.success ) { \n\t\t\tprops.login( response.userToken );\n\t\t\tsetIsLogin(true);\n\t\t} else {\n\t\t\tsetIsLogin(false);\n\t\t\tsetError( response.error )\n\t\t}\n  \t}\n  \t\n\tif ( isLogin ) { \n    \treturn( <Redirect to=\"/sources\" /> )  \n   }\n\n  \n  \n  \tconst ShowError = () => {\n\t\tif ( error ) { \n\t\t\treturn( <h1>{error} </h1> ); \n\t\t}  \n\t\telse { return null ;}\n\t}\n\n  \n  \n  return (\n  \t<div className=\"back-image-loginpage\">\n  \t\n\t\t<ShowError />\n\t\t\n\t\t<div className=\"Login-page\">\n\n\t\t\t{/* SIGN-IN */}\n\n\t\t\t<div className=\"Sign\">\n\t\t\t\t\t\n\t\t\t\t<Input id=\"signinEmail\" className=\"Login-input\" placeholder=\"arthur@lacapsule.com\" \n\t\t\t\t\tonChange={(e) => setsigninEmail(e.target.value)} required />\n\n\t\t\t\t<Input.Password id=\"signinPassword\" className=\"Login-input\" placeholder=\"password\"\n\t\t\t\t\tonChange={(e) => setsigninPassword(e.target.value)} required />\n\n\n\t\t\t\t<Button onClick={()=>handleSignIn()} style={{width:'80px'}} type=\"primary\">Sign-in</Button>\n\n\t\t\t</div>\n\n\t\t\t{/* SIGN-UP */}\n\n\t\t\t<div className=\"Sign\">\n\t\t\t\t\t\t\n\t\t\t\t<Input id=\"signupName\" className=\"Login-input\" placeholder=\"Arthur G\" \n\t\t\t\t\tonChange={(e) => setsignupName(e.target.value)} required />\n\t\t\t\t\t\n\t\t\t\t<Input id=\"signupEmail\" className=\"Login-input\" placeholder=\"arthur@lacapsule.com\" \n\t\t\t\t\tonChange={(e) => setsignupEmail(e.target.value)} required />\n\n\t\t\t\t<Input.Password id=\"signupPassword\" className=\"Login-input\" placeholder=\"password\"\n\t\t\t\t\tonChange={(e) => setsignupPassword(e.target.value)} required />\n\n\t\t\t\t<Button onClick={()=>handleSignUp()} style={{width:'80px'}} type=\"primary\">Sign-up</Button>\n\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n  );\n}\n\n\n\n//function mapStateToProps(state) {\n//  return {\n//    userToken: state.loginToken\n//  }\n//}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    login: function(str) { \n       dispatch( { type: 'addLogin', token: str } )\n    }\n  }\n}\n\nexport default connect(\n    null, \n    mapDispatchToProps\n)( ScreenHome );\n\n\n\n"]},"metadata":{},"sourceType":"module"}